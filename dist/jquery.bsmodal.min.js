/*!
 * jquery.bsmodal.js v1.1.0
 * https://github.com/ycs77/jquery-plugin-bsModal
 *
 * Copyright 2018-2020 Lucas Yang
 * Released under the MIT license
 *
 * Date: 2020-11-20T02:38:46.226Z
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).$)}(this,function(t){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=o(t);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
   * recursive-object-assign
   * https://github.com/gmasmejean/recursiveAssign
   */var l=function(e,n){Object.keys(n).forEach(function(t){var o,a;o=e,t=n[a=t],i(t)?(i(o[a])||(o[a]={}),l(o[a],t)):o[a]=t})},i=function(t){return null!=t&&void 0!==t.constructor&&t.constructor.prototype===Object.prototype};function c(o){if("object"===n(o)){for(var t=arguments.length,a=new Array(1<t?t-1:0),e=1;e<t;e++)a[e-1]=arguments[e];a.forEach(function(t){i(t)&&l(o,t)})}return o}function a(t,i,r){var d,c,u,s;null===i.width&&null===i.height&&r?r(t):(d="",c=document.createElement("canvas"),u=c.getContext("2d"),(s=new Image).src=t,s.onload=function(){var t,o,a,e,n=s.width,l=s.height,o=(t=n,o=l,a=i.width,e=i.height,Math.min(a/t,e/o));c.width=n*o,c.height=l*o,u.drawImage(s,0,0,n,l,0,0,n*o,l*o),d=c.toDataURL(),r&&r(d)})}function e(t){for(var o=(0<=t.split(",")[0].indexOf("base64")?atob:unescape)(t.split(",")[1]),t=t.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(o.length),e=0;e<o.length;e++)a[e]=o.charCodeAt(e);return new Blob([a],{type:t})}d.default.fn&&(d.default.fn.bsModal=function(t){var o=this,a=c({},a={id:"exampleModal",title:"Modal title",titleLavel:5,body:"",label:null,lang:null,langs:{en:{okBtn:{text:"Save"},cancelBtn:{text:"Close"},confirmOkText:"OK",confirmCancelText:"Cancel"},"zh-TW":{okBtn:{text:"儲存"},cancelBtn:{text:"關閉"},confirmOkText:"確定",confirmCancelText:"取消"}},modal:null,fade:!0,close:!0,backdrop:!0,confirm:!1,okBtn:{text:"",color:"primary"},cancelBtn:{text:"",color:"secondary"},confirmOkText:"",confirmCancelText:"",onOpen:function(){return!0},onClose:function(){return!0},onOk:function(){return!0},onCancel:function(){return!0}},a.langs[a.lang]||a.langs[navigator.language||navigator.userLanguage]||a.langs.en),e=c({},a,t);e.label=e.label||"".concat(e.id,"Label"),void 0===t.close&&(e.close=!1),void 0===t.backdrop&&(e.backdrop="static");var n,l,i=null;return"string"==typeof e.modal&&(i=d.default(e.modal)),null===i&&(i=d.default('<div class="modal" />').addClass(e.fade?"fade":"").attr({id:e.id,tabindex:"-1",role:"dialog","aria-labelledby":e.label,"data-backdrop":e.backdrop}).appendTo("body"),a=d.default('<div class="modal-dialog" />').attr({role:"document"}).appendTo(i),t=d.default('<div class="modal-content" />').appendTo(a),a=d.default('<div class="modal-header" />').appendTo(t),d.default("<h".concat(e.titleLavel,' class="modal-title" />')).attr("id",e.label).html(e.title).css("display","inline").appendTo(a),e.close&&d.default('<button class="close" type="button" data-dismiss="modal" aria-label="Close" />').append(d.default('<span aria-hidden="true">&times;</span>')).appendTo(a),e.body&&d.default('<div class="modal-body" />').html(e.body).appendTo(t),(e.cancelBtn||e.okBtn)&&(t=d.default('<div class="modal-footer" />').appendTo(t),e.cancelBtn&&(n=d.default('<button type="button" data-dismiss="modal" />').addClass("btn btn-".concat(e.cancelBtn.color)).text(e.confirm?e.confirmCancelText:e.cancelBtn.text).appendTo(t)),e.okBtn&&(l=d.default('<button type="button" />').addClass("btn btn-".concat(e.okBtn.color)).text(e.confirm?e.confirmOkText:e.okBtn.text).appendTo(t))),i.on("shown.bs.modal",function(){e.onOpen.call(o)}),i.on("hidden.bs.modal",function(){e.onClose.call(o)}),l&&l.on("click",function(){!1!==e.onOk.call(o)&&i.modal("hide")}),n&&n.on("click",function(){e.onCancel.call(o)})),this.modal=i,this.attr({"data-toggle":"modal","data-target":"#".concat(i.attr("id"))}),this},d.default.fn.bsModalCropper=function(t){var n=this;if("undefined"==typeof Cropper)throw"Error: Cropper.js is not found.";var o,l,i=c({},{id:"exampleModalCropper",confirm:!0,src:null,imgId:"exampleImage",cropper:{viewMode:1},maxWidth:null,maxHeight:null,uploadFile:null,action:null,method:"post",fileName:"file",data:{},uploadConfig:{allowTypes:["image/jpeg","image/png"],maxSize:5*Math.pow(1024,2)},success:function(){},error:function(){},axios:null,axiosOriginalData:!1,onUpload:function(){return!0},onUploadError:function(){return!0},onCropper:function(){return!0}},t),r=d.default("<img />").attr("id",i.imgId).css("max-width","100%");return i.body=d.default('<div class="img-container" />').append(r),i.onOpen=function(){o=new Cropper(r.get(0),i.cropper)},i.onOk=function(){var t=o.getCroppedCanvas().toDataURL();o.destroy(),a(t,{width:i.maxWidth,height:i.maxHeight},function(t){var o;i.onCropper.call(n,t,e(t),i.uploadFile),"string"==typeof i.action&&(t=e(t),(o=new FormData).append(i.fileName,t),(t=Object.keys(i.data)).length&&t.forEach(function(t){o.append(t,i.data[t])}),function(o,t){if(o.axios)o.axios({url:o.action,method:o.method,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){o.success(o.axiosOriginalData?t:t.data)}).catch(o.error);else{if(void 0===d.default.ajax)throw"Error: ajax function is not found, Can't upload image.";d.default.ajax(o.action,{method:o.method,data:t,processData:!1,contentType:!1,success:o.success,error:o.error})}}(i,o))})},i.onCancel=function(){o.destroy()},i.src?(r.attr("src",i.src),i.uploadFile=null,this.bsModal(i)):(l=this.children("input[type=file]").get(0)).onchange=function(){if(l.files.length){var o,a=l.files[0];if(i.uploadFile=a,l.value="",!1!==i.onUpload.call(n,i.uploadFile)){if(i.uploadConfig.allowTypes)if(!i.uploadConfig.allowTypes.some(function(t){return t===a.type}))return void i.onUploadError.call(n,"Upload file type is wrong");if(i.uploadConfig.maxSize){var t,e=i.uploadConfig.maxSize;if(a.size>e)return e<1024?t="".concat(e," B"):e>=Math.pow(1024,1)&&e<Math.pow(1024,2)?t="".concat(Math.floor(e/Math.pow(1024,1))," KB"):e>=Math.pow(1024,2)&&e<Math.pow(1024,3)&&(t="".concat(Math.floor(e/Math.pow(1024,2))," MB")),void i.onUploadError.call(n,"Uploaded file cannot be larger than ".concat(t))}e=a,o=function(t){i.src=t,r.attr("src",i.src),n.bsModal(i),n.modal.modal("show"),n.removeAttr("data-toggle").removeAttr("data-target")},(t=new FileReader).onload=function(t){o(t.target.result)},t.readAsDataURL(e)}}},this})});