/*!
 * jquery.bsmodal.js v1.1.1
 * https://github.com/ycs77/jquery-plugin-bsModal
 *
 * Copyright 2018-2021 Lucas Yang
 * Released under the MIT license
 *
 * Date: 2021-01-06T19:50:09.295Z
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).$)}(this,function(t){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=o(t);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
   * recursive-object-assign
   * https://github.com/gmasmejean/recursiveAssign
   */var l=function(n,e){Object.keys(e).forEach(function(t){var o,a;o=n,t=e[a=t],i(t)?(i(o[a])||(o[a]={}),l(o[a],t)):o[a]=t})},i=function(t){return null!=t&&void 0!==t.constructor&&t.constructor.prototype===Object.prototype};function u(o){if("object"===e(o)){for(var t=arguments.length,a=new Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];a.forEach(function(t){i(t)&&l(o,t)})}return o}function s(t,i,r){var d,c,u,s;null===i.width&&null===i.height&&r?r(t):(d="",c=document.createElement("canvas"),u=c.getContext("2d"),(s=new Image).src=t,s.onload=function(){var t,o,a,n,e=s.width,l=s.height,o=(t=e,o=l,a=i.width,n=i.height,Math.min(a/t,n/o));c.width=e*o,c.height=l*o,u.drawImage(s,0,0,e,l,0,0,e*o,l*o),d=c.toDataURL(),r&&r(d)})}function f(t){for(var o=(0<=t.split(",")[0].indexOf("base64")?atob:unescape)(t.split(",")[1]),t=t.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(o.length),n=0;n<o.length;n++)a[n]=o.charCodeAt(n);return new Blob([a],{type:t})}c.default.fn&&(c.default.fn.bsModal=function(t){var o=this,a=u({},a={id:"exampleModal",title:"Modal title",titleLavel:5,body:"",label:null,lang:null,langs:{en:{okBtn:{text:"Save"},cancelBtn:{text:"Close"},confirmOkText:"OK",confirmCancelText:"Cancel"},"zh-TW":{okBtn:{text:"儲存"},cancelBtn:{text:"關閉"},confirmOkText:"確定",confirmCancelText:"取消"}},modal:null,fade:!0,close:!0,backdrop:!0,confirm:!1,okBtn:{text:"",color:"primary"},cancelBtn:{text:"",color:"secondary"},confirmOkText:"",confirmCancelText:"",onOpen:function(){return!0},onClose:function(){return!0},onOk:function(){return!0},onCancel:function(){return!0}},a.langs[a.lang]||a.langs[navigator.language||navigator.userLanguage]||a.langs.en),n=u({},a,t);n.label=n.label||"".concat(n.id,"Label"),void 0===t.close&&(n.close=!1),void 0===t.backdrop&&(n.backdrop="static");var e,l,i=null;return"string"==typeof n.modal&&(i=c.default(n.modal)),null===i&&(i=c.default('<div class="modal" />').addClass(n.fade?"fade":"").attr({id:n.id,tabindex:"-1",role:"dialog","aria-labelledby":n.label,"data-backdrop":n.backdrop}).appendTo("body"),a=c.default('<div class="modal-dialog" />').attr({role:"document"}).appendTo(i),t=c.default('<div class="modal-content" />').appendTo(a),a=c.default('<div class="modal-header" />').appendTo(t),c.default("<h".concat(n.titleLavel,' class="modal-title" />')).attr("id",n.label).html(n.title).css("display","inline").appendTo(a),n.close&&c.default('<button class="close" type="button" data-dismiss="modal" aria-label="Close" />').append(c.default('<span aria-hidden="true">&times;</span>')).appendTo(a),n.body&&c.default('<div class="modal-body" />').html(n.body).appendTo(t),(n.cancelBtn||n.okBtn)&&(t=c.default('<div class="modal-footer" />').appendTo(t),n.cancelBtn&&(e=c.default('<button type="button" data-dismiss="modal" />').addClass("btn btn-".concat(n.cancelBtn.color)).text(n.confirm?n.confirmCancelText:n.cancelBtn.text).appendTo(t)),n.okBtn&&(l=c.default('<button type="button" />').addClass("btn btn-".concat(n.okBtn.color)).text(n.confirm?n.confirmOkText:n.okBtn.text).appendTo(t))),i.on("shown.bs.modal",function(){n.onOpen.call(o)}),i.on("hidden.bs.modal",function(){n.onClose.call(o)}),l&&l.on("click",function(){!1!==n.onOk.call(o)&&i.modal("hide")}),e&&e.on("click",function(){n.onCancel.call(o)})),this.modal=i,this.attr({"data-toggle":"modal","data-target":"#".concat(i.attr("id"))}),this},c.default.fn.bsModalCropper=function(t){var e=this;if("undefined"==typeof Cropper)throw"Error: Cropper.js is not found.";var o,l=u({},{id:"exampleModalCropper",confirm:!0,src:null,imgId:"exampleImage",cropper:{viewMode:1},maxWidth:null,maxHeight:null,uploadFile:null,action:null,method:"post",fileName:"file",data:{},uploadConfig:{allowTypes:["image/jpeg","image/png"],maxSize:5*Math.pow(1024,2)},success:function(){},error:function(){},axios:null,axiosOriginalData:!1,onUpload:function(){return!0},onUploadError:function(){return!0},onCropper:function(){return!0}},t),i=c.default("<img />").attr("id",l.imgId).css("max-width","100%");l.body=c.default('<div class="img-container" />').append(i);var a=l.onOpen;l.onOpen=function(){o=new Cropper(i.get(0),l.cropper),a()};var n=l.onOk;l.onOk=function(){n();var t=o.getCroppedCanvas().toDataURL();o.destroy(),s(t,{width:l.maxWidth,height:l.maxHeight},function(t){var o;l.onCropper.call(e,t,f(t),l.uploadFile),"string"==typeof l.action&&(t=f(t),(o=new FormData).append(l.fileName,t),(t=Object.keys(l.data)).length&&t.forEach(function(t){o.append(t,l.data[t])}),function(o,t){if(o.axios)o.axios({url:o.action,method:o.method,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){o.success(o.axiosOriginalData?t:t.data)}).catch(o.error);else{if(void 0===c.default.ajax)throw"Error: ajax function is not found, Can't upload image.";c.default.ajax(o.action,{method:o.method,data:t,processData:!1,contentType:!1,success:o.success,error:o.error})}}(l,o))})};var r,d=l.onCancel;return l.onCancel=function(){o.destroy(),d()},l.src?(i.attr("src",l.src),l.uploadFile=null,this.bsModal(l)):(r=this.children("input[type=file]").get(0)).onchange=function(){if(r.files.length){var o,a=r.files[0];if(l.uploadFile=a,r.value="",!1!==l.onUpload.call(e,l.uploadFile)){if(l.uploadConfig.allowTypes)if(!l.uploadConfig.allowTypes.some(function(t){return t===a.type}))return void l.onUploadError.call(e,"Upload file type is wrong");if(l.uploadConfig.maxSize){var t,n=l.uploadConfig.maxSize;if(a.size>n)return n<1024?t="".concat(n," B"):n>=Math.pow(1024,1)&&n<Math.pow(1024,2)?t="".concat(Math.floor(n/Math.pow(1024,1))," KB"):n>=Math.pow(1024,2)&&n<Math.pow(1024,3)&&(t="".concat(Math.floor(n/Math.pow(1024,2))," MB")),void l.onUploadError.call(e,"Uploaded file cannot be larger than ".concat(t))}n=a,o=function(t){l.src=t,i.attr("src",l.src),e.bsModal(l),e.modal.modal("show"),e.removeAttr("data-toggle").removeAttr("data-target")},(t=new FileReader).onload=function(t){o(t.target.result)},t.readAsDataURL(n)}}},this})});