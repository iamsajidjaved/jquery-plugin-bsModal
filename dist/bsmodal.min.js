/*!
 * bsmodal.js v1.0.10
 * https://github.com/ycs77/jquery-plugin-bsModal
 *
 * Copyright 2018 Chen-shin, Yang
 * Released under the MIT license
 *
 * Date: 2019-02-20T07:36:14.015Z
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],o):o(t.jQuery)}(this,function(p){"use strict";p=p&&p.hasOwnProperty("default")?p.default:p;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(e,l){Object.keys(l).forEach(function(t){var o,n,a;o=e,a=l[n=t],i(a)?(i(o[n])||(o[n]={}),r(o[n],a)):o[n]=a})},i=function(t){return null!=t&&void 0!==t.constructor&&t.constructor.prototype===Object.prototype};
/*!
   * recursive-object-assign
   * https://github.com/gmasmejean/recursiveAssign
   */function f(o){if("object"===(void 0===o?"undefined":e(o))){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];n.forEach(function(t){i(t)&&r(o,t)})}return o}var n=function(t,i,d){if(null===i.width&&null===i.height&&d)d(t);else{var c="",s=document.createElement("canvas"),p=s.getContext("2d"),f=new Image;f.src=t,f.onload=function(){var t,o,n,a,e=f.width,l=f.height,r=(t=e,o=l,n=i.width,a=i.height,Math.min(n/t,a/o));s.width=e*r,s.height=l*r,p.drawImage(f,0,0,e,l,0,0,e*r,l*r),c=s.toDataURL(),d&&d(c)}}},l=function(t){var o=void 0;o=0<=t.split(",")[0].indexOf("base64")?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(o.length),e=0;e<o.length;e++)a[e]=o.charCodeAt(e);return new Blob([a],{type:n})};p.fn&&(p.fn.bsModal=function(t){var o=this,n={id:"exampleModal",title:"Modal title",titleLavel:5,body:"",label:null,lang:null,langs:{en:{okBtn:{text:"Save"},cancelBtn:{text:"Close"},confirmOkText:"OK",confirmCancelText:"Cancel"},"zh-TW":{okBtn:{text:"儲存"},cancelBtn:{text:"關閉"},confirmOkText:"確定",confirmCancelText:"取消"}},modal:null,fade:!0,close:!0,backdrop:!0,confirm:!1,okBtn:{text:"",color:"primary"},cancelBtn:{text:"",color:"secondary"},confirmOkText:"",confirmCancelText:"",onOpen:function(){return!0},onClose:function(){return!0},onOk:function(){return!0},onCancel:function(){return!0}},a=f({},n=f({},n,n.langs[n.lang]||n.langs[navigator.language||navigator.userLanguage]||n.langs.en),t);a.label=a.label||a.id+"Label",void 0===t.close&&(a.close=!1),void 0===t.backdrop&&(a.backdrop="static");var e=null;if("string"==typeof a.modal&&(e=p(a.modal)),null===e){e=p('<div class="modal" />').addClass(a.fade?"fade":"").attr({id:a.id,tabindex:"-1",role:"dialog","aria-labelledby":a.label,"data-backdrop":a.backdrop}).appendTo("body");var l=p('<div class="modal-dialog" />').attr({role:"document"}).appendTo(e),r=p('<div class="modal-content" />').appendTo(l),i=p('<div class="modal-header" />').appendTo(r);p("<h"+a.titleLavel+' class="modal-title" />').attr("id",a.label).html(a.title).css("display","inline").appendTo(i),a.close&&p('<button class="close" type="button" data-dismiss="modal" aria-label="Close" />').append(p('<span aria-hidden="true">&times;</span>')).appendTo(i),a.body&&p('<div class="modal-body" />').html(a.body).appendTo(r);var d=void 0,c=void 0,s=void 0;(a.cancelBtn||a.okBtn)&&(d=p('<div class="modal-footer" />').appendTo(r),a.cancelBtn&&(c=p('<button type="button" data-dismiss="modal" />').addClass("btn btn-"+a.cancelBtn.color).text(a.confirm?a.confirmCancelText:a.cancelBtn.text).appendTo(d)),a.okBtn&&(s=p('<button type="button" />').addClass("btn btn-"+a.okBtn.color).text(a.confirm?a.confirmOkText:a.okBtn.text).appendTo(d))),e.on("shown.bs.modal",function(){a.onOpen.call(o)}),e.on("hidden.bs.modal",function(){a.onClose.call(o)}),s&&s.on("click",function(){!1!==a.onOk.call(o)&&e.modal("hide")}),c&&c.on("click",function(){a.onCancel.call(o)})}return this.modal=e,this.attr({"data-toggle":"modal","data-target":"#"+e.attr("id")}),this},p.fn.bsModalCropper=function(t){var r=this;if("undefined"==typeof Cropper)throw"Error: Cropper.js is not found.";var i=f({},{id:"exampleModalCropper",confirm:!0,src:null,imgId:"exampleImage",cropper:{viewMode:1},maxWidth:null,maxHeight:null,action:null,method:"post",fileName:"file",data:{},uploadConfig:{allowTypes:["image/jpeg","image/png"],maxSize:5*Math.pow(1024,2)},success:function(){},error:function(){},axios:null,axiosOriginalData:!1,onUpload:function(){return!0},onUploadError:function(){return!0},onCropper:function(){return!0}},t),d=p("<img />").attr("id",i.imgId).css("max-width","100%"),o=void 0;if(i.body=p('<div class="img-container" />').append(d),i.onOpen=function(){o=new Cropper(d.get(0),i.cropper)},i.onOk=function(){var t=o.getCroppedCanvas().toDataURL();o.destroy(),n(t,{width:i.maxWidth,height:i.maxHeight},function(t){if(i.onCropper.call(r,t,l(t)),"string"==typeof i.action){var o=l(t),n=new FormData;n.append(i.fileName,o);var a=Object.keys(i.data);a.length&&a.forEach(function(t){n.append(t,i.data[t])}),function(o,t){if(o.axios)o.axios({url:o.action,method:o.method,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){o.success(o.axiosOriginalData?t:t.data)}).catch(o.error);else{if(void 0===p.ajax)throw"Error: ajax function is not found, Can't upload image.";p.ajax(o.action,{method:o.method,data:t,processData:!1,contentType:!1,success:o.success,error:o.error})}}(i,n)}})},i.onCancel=function(){o.destroy()},i.src)d.attr("src",i.src),this.bsModal(i);else{var c=this.children("input[type=file]").get(0);c.onchange=function(){if(c.files.length){var o=c.files[0];if(c.value="",!1!==i.onUpload.call(r)){var t,n,a;if(i.uploadConfig.allowTypes)if(!i.uploadConfig.allowTypes.some(function(t){return t===o.type}))return void i.onUploadError.call(r,"Upload file type is wrong");if(i.uploadConfig.maxSize){var e=i.uploadConfig.maxSize;if(o.size>e){var l=void 0;return e<1024?l=e+" B":e>=Math.pow(1024,1)&&e<Math.pow(1024,2)?l=Math.floor(e/Math.pow(1024,1))+" KB":e>=Math.pow(1024,2)&&e<Math.pow(1024,3)&&(l=Math.floor(e/Math.pow(1024,2))+" MB"),void i.onUploadError.call(r,"Uploaded file cannot be larger than "+l)}}t=o,n=function(t){i.src=t,d.attr("src",i.src),r.bsModal(i),r.modal.modal("show"),r.removeAttr("data-toggle").removeAttr("data-target")},(a=new FileReader).onload=function(t){n(t.target.result)},a.readAsDataURL(t)}}}}return this})});